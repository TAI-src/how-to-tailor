<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://tai-src.github.io/how-to-tailor/examples/example_11/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Optimization of a GC-MS (mass spectrometer) for high-throughput analysis of biomedical samples - Development of ParEGO - How to Tailor</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">How to Tailor</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome to How to tailor</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Examples</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">Example Index</a>
</li>
                                    
<li>
    <a href="../example_1/" class="dropdown-item">Optimisation for a Fleet of Healthcare Vehicles</a>
</li>
                                    
<li>
    <a href="../example_10/" class="dropdown-item">Aircraft design</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Optimization of a GC-MS (mass spectrometer) for high-throughput analysis of biomedical samples - Development of ParEGO</a>
</li>
                                    
<li>
    <a href="../example_12/" class="dropdown-item">Identifying several diverse solutions rather than a single good one</a>
</li>
                                    
<li>
    <a href="../example_13/" class="dropdown-item">Brachytherapy treatment planning</a>
</li>
                                    
<li>
    <a href="../example_14/" class="dropdown-item">Engine design optimization</a>
</li>
                                    
<li>
    <a href="../example_15/" class="dropdown-item">Electric Motor Design Optimization</a>
</li>
                                    
<li>
    <a href="../example_2/" class="dropdown-item">Building spatial design</a>
</li>
                                    
<li>
    <a href="../example_3/" class="dropdown-item">Combined Topology and Fibre-Orientation via Moving Morphable Components and Lamination Parameters</a>
</li>
                                    
<li>
    <a href="../example_4/" class="dropdown-item">Antenna control</a>
</li>
                                    
<li>
    <a href="../example_5/" class="dropdown-item">Deep RL in Ludii (general game playing)</a>
</li>
                                    
<li>
    <a href="../example_6/" class="dropdown-item">MarioGAN</a>
</li>
                                    
<li>
    <a href="../example_7/" class="dropdown-item">Multi-objective optimisation of a Stator</a>
</li>
                                    
<li>
    <a href="../example_8/" class="dropdown-item">Optimizing Container turnover rate for a container yard by tuning parameters of a blackbox decision support system</a>
</li>
                                    
<li>
    <a href="../example_9/" class="dropdown-item">HPO for a speaker diarization model for emergency medical systems</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../example_10/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../example_12/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
  
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#optimization-of-a-gc-ms-mass-spectrometer-for-high-throughput-analysis-of-biomedical-samples-development-of-parego" class="nav-link">Optimization of a GC-MS (mass spectrometer) for high-throughput analysis of biomedical samples - Development of ParEGO</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#problem-description" class="nav-link">Problem Description</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#why-was-tailoring-needed" class="nav-link">Why was tailoring needed?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#baseline-algorithm" class="nav-link">Baseline algorithm</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#tailoring-process" class="nav-link">Tailoring process</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#what-was-tailored" class="nav-link">What was tailored</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#main-problem-characteristics" class="nav-link">Main problem characteristics</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#references" class="nav-link">References</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#author" class="nav-link">Author</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="optimization-of-a-gc-ms-mass-spectrometer-for-high-throughput-analysis-of-biomedical-samples-development-of-parego"><a href="https://ieeexplore.ieee.org/document/1583627/">Optimization of a GC-MS (mass spectrometer) for high-throughput analysis of biomedical samples - Development of ParEGO</a><a class="headerlink" href="#optimization-of-a-gc-ms-mass-spectrometer-for-high-throughput-analysis-of-biomedical-samples-development-of-parego" title="Permanent link">&para;</a></h1>
<h2 id="problem-description">Problem Description<a class="headerlink" href="#problem-description" title="Permanent link">&para;</a></h2>
<p>Configure the parameters of an analytical instrument (a GC-MS machine) such that it would obtain a high-resolution identification of all the constituents of a complex sample (such as human blood with all the metabolic products in it identified). No simulator of the GC-MS was available or would be realistic. Only one GC-MS machine was available (i.e., parallelization is not possible). Evaluation of one configuration on one sample requires of the order of 15 minutes to 75 minutes, depending on settings. Minimizing the processing time of the GC-MS machine to produce its output was an additional important objective.</p>
<h2 id="why-was-tailoring-needed">Why was tailoring needed?<a class="headerlink" href="#why-was-tailoring-needed" title="Permanent link">&para;</a></h2>
<p>Baselines considered were multiobjective evolutionary algorithms. The motivations were three-fold
* No analytical function: black-box setting
* Multiple objectives, at least 3: number of peaks, signal-to-noise, processing time
* Familiarity with multiobjective EAs
Tailoring was needed because these methods require order 1000‚Äôs of evaluations and are not designed for optimization under a much more limited budget. Our budget was set at 120 experiments, initially.</p>
<h2 id="baseline-algorithm">Baseline algorithm<a class="headerlink" href="#baseline-algorithm" title="Permanent link">&para;</a></h2>
<p><em>No response</em></p>
<h2 id="tailoring-process">Tailoring process<a class="headerlink" href="#tailoring-process" title="Permanent link">&para;</a></h2>
<ul>
<li>We first tailored PAES, PESA, and NSGA-II as leading EMO algorithms of the time</li>
<li>Mostly this is about reducing the population size significantly, and trying to find reasonable mutation rates. All of this was done in simulation of course, because you cannot tune on the real problem!</li>
<li>We then investigated single-objective methods for expensive problems. We chose to adapt EGO (Jones et al), which by today‚Äôs classification is a Bayesian optimization method, but at that time was known as a DACE-model- or Kriging-metamodel-based method. </li>
<li>We then tailored (really, generalized) EGO for the multiobjective case by introducing a randomized sampling of scalarization functions, and</li>
<li>Adding archiving methods, and</li>
<li>Experimenting with searching over the Kriging metamodel (‚Äúacquistion function‚Äù) with alternatives to branch-and-bound or downhill simplex (used in the original EGO paper); eventually we used an inner EA with niching to ensure good search of this multimodal landscape. </li>
</ul>
<h2 id="what-was-tailored">What was tailored<a class="headerlink" href="#what-was-tailored" title="Permanent link">&para;</a></h2>
<p><em>No response</em></p>
<h2 id="main-problem-characteristics">Main problem characteristics<a class="headerlink" href="#main-problem-characteristics" title="Permanent link">&para;</a></h2>
<ul>
<li>Problem properties<ul>
<li>Blackbox - a real physical experiment</li>
<li>No gradients</li>
<li>No models (initially)</li>
<li>Noisy</li>
<li>List of feasible algorithms: PAES, PESA, NSGA-II, or adapt EGO to the multiobjective case, i.e., develop ParEGO</li>
<li>Existing alternatives / solutions: none</li>
</ul>
</li>
<li>Search space<ul>
<li>Continuous / mixed</li>
<li>Low - up to 15</li>
</ul>
</li>
<li>Objective Space<ul>
<li>3 objectives - finding good tradeoffs very important </li>
<li>15 minutes-75 minutes for one evaluation (of all objectives) of one solution</li>
<li>Noise in fitness evaluation</li>
<li>The definition of the objective(s) were changing during the first few evaluations as we honed our ability to measure signal-noise ratio and to count peaks in the output chromatograms.</li>
</ul>
</li>
<li>Constraints<ul>
<li>Constraint-types: mixed. Some constraints were known a priori; some we learnt as we progressed, i.e., the machine failed for some settings</li>
</ul>
</li>
<li>User needs<ul>
<li>Biggest factor was time on the machine. We needed to optimize the settings for a much larger study so that thousands of samples could be analysed using the ‚Äúoptimal‚Äù settings. We had weeks to achieve this.</li>
<li>So all tuning and algorithm design decisions have to be made offline, e.g. using either intuition or tuning on other functions.</li>
<li>A team with very different expertise was needed to undertake this whole process of developing an optimized GC-MS setting. Communication was very challenging. 
A notable remark from the senior scientist (to me) was, ‚ÄúJosh, your algorithm appears to be doing entirely random experiments‚Äù. (I suggest, now that ParEGO is quite well established, he was wrong. But of course it looked like that from an onlooker perspective).
Notice that to tune and compare algorithms, we simplified functions in the multiobjective EA test suites of the day. The simplification is motivated and described properly in the ParEGO paper cited above.</li>
</ul>
</li>
</ul>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<p>Closed-Loop, Multiobjective Optimization of Analytical Instrumentation:‚Äâ Gas Chromatography/Time-of-Flight Mass Spectrometry of the Metabolomes of Human Serum and of Yeast Fermentations
Steve O'Hagan, Warwick B. Dunn, Marie Brown, Joshua D. Knowles, and Douglas B. Kell. Analytical Chemistry 2005 77 (1), 290-303. DOI: <a href="https://pubs.acs.org/doi/10.1021/ac049146x">10.1021/ac049146x</a>
ParEGO: a hybrid algorithm with on-line landscape approximation for expensive multiobjective optimization problems
Joshua Knowles. IEEE Transactions on Evolutionary Computation 2006 10(1), 50-66.  <a href="https://ieeexplore.ieee.org/document/1583627/">doi: 10.1109/TEVC.2005.851274</a></p>
<h3 id="contact-information-optional">Contact information (optional)<a class="headerlink" href="#contact-information-optional" title="Permanent link">&para;</a></h3>
<p><em>No response</em></p>
<h2 id="author">Author<a class="headerlink" href="#author" title="Permanent link">&para;</a></h2>
<p>Joshua Knowles
<em>No response</em></p></div>

  


  

  

  <hr>
  <p style="font-size: 0.9em;">
    üí° Found an issue?
    <a href="https://github.com/TAI-src/how-to-tailor/issues/new?template=edit.yml&title=[Edit]%20examples/example_11.md&page=examples/example_11.md">
      Suggest an edit
    </a>
    or
    <a href="https://github.com/TAI-src/how-to-tailor/edit/main/how-to-tailor/docs/examples/example_11.md">
       Edit this page on GitHub
    </a>
  </p>
  <p style="font-size: 0.9em;">
     Contribute an example
     <a href="https://github.com/TAI-src/how-to-tailor/issues/new?template=new_example.yml">
        Add new example
    </a>
  </p>


            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
